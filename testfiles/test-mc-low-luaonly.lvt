% !Mode:: "TeX:DE:UTF-8:Main"
\RequirePackage{pdfmanagement}
\DeclareDocumentMetadata{}
\documentclass{scrartcl}
\input{regression-test}

\usepackage[english]{babel}
\usepackage{tagpdf}
\ExplSyntaxOn
\cs_set_eq:NN \__xparse_split_argument:nnn \__cmd_split_argument:nnn
\ExplSyntaxOff
\usepackage{graphicx,lipsum}
\tagpdfifpdftexT
 {
  \usepackage[utf8]{inputenc}
  \usepackage[T1]{fontenc}
 }
\tagpdfifluatexT
 {
  \usepackage{fontspec}
  \usepackage{luacode}
 }
\tagpdfsetup{activate-mc,log=vv,uncompress} %not too much in the log .. tests fails then
\begin{document}
some things untagged.
\START
\showoutput
\ExplSyntaxOn
%\iow_log:x { \c_sys_engine_str }

\tag_mc_begin:n{artifact=pagination}%
Artifact%
\tag_mc_end:

\tag_mc_begin:n{artifact}%
Artifact%
\tag_mc_end:

\tag_mc_begin:n{tag=Figure}
\includegraphics{example-image-duck}
\tag_mc_end:

some things untagged.

\tag_mc_begin:n{tag=P}marginpar \tagpdfifluatexT{\showtagpdfattributes} blblb  \tag_mc_end:

\tag_mc_begin:n{tag=P}\lipsum[1]\tag_mc_end:
\tag_mc_begin:n{tag=P}\lipsum[1]\tag_mc_end:
\tag_mc_begin:n{tag=P}\lipsum[1]\tag_mc_end:
\tag_mc_begin:n{tag=P}\lipsum[1]\tag_mc_end:
\tag_mc_begin:n{tag=P}\lipsum[1]\tag_mc_end:
\tag_mc_begin:n{tag=P}\lipsum[1]\tag_mc_end:
\ExplSyntaxOff
\end{document}


